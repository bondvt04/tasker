{"version":3,"sources":["db/index.js"],"names":[],"mappings":";;;;;AAGA,IAAI,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC;;AAErE,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAE5C,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAEnC,IAAI,OAAO,GAAG;;;;;;;;CAQb,CAAC;;;AAGF,QAAQ,CAAC,OAAO,CAAC,4BAA4B,EAAE,OAAO,CAAC,CAAC;;AAExD,IAAI,EAAE,GAAG,QAAQ,CAAC,UAAU,CAAC;;;;;AAK7B,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,UAAS,GAAG,EAAE;AACzB,UAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,GAAG,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;AAE1D,QAAG,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE;AAClC,cAAM,IAAI,aAAa,CAAC,yFAAyF,CAAC,OAAO,CAAC,CAAC;KAC9H;CACJ,CAAC,CAAC;;AAEH,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,QAAQ,GAAG;;AAEhC,UAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC;;CAEpD,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC","file":"db/index.js","sourcesContent":["/**\n * Created by anatoliybondar on 8/21/15.\n */\nvar CriticalError = require(\"../errors/index\").classes.CriticalError;\n\nvar colors = require('colors');\nvar logger = require(\"verbose-console-log\");\n\nvar mongoose = require('mongoose');\n\nvar options = {\n    //server: {\n    //    socketOptions: {\n    //        socketTimeoutMS: 100,\n    //        connectTimeoutMS: 100,\n    //        noDelay: true\n    //    }\n    //}\n};\n\n//mongoose.createConnection('mongodb://localhost/tasker', options);\nmongoose.connect('mongodb://localhost/tasker', options);\n\nvar db = mongoose.connection;\n\n//dbDomain.add(db);\n//db.on('error', logger.error.bind(logger, 'connection error:'));\n\ndb.on('error', function(err) {\n    logger.error(\"Db connection error:\".red, err.message.red);\n\n    if(err.message.match(/ECONNREFUSED/)) {\n        throw new CriticalError(\"Try to run 'mongod --config YOUR_MONGODB_CONF' (/etc/mongodb.conf or something similar)\".magenta);\n    }\n});\n\ndb.once('open', function callback() {\n    // Соединение прошло успешно\n    logger.log(\"Db connection was successful\".green);\n    //callback();\n});\n\nmodule.exports = mongoose;"],"sourceRoot":"/source/"}