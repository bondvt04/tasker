{"version":3,"sources":["megaLogger.js"],"names":[],"mappings":"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","file":"megaLogger.js","sourcesContent":["/**\n * Created by anatoliybondar on 9/14/15.\n */\n\nvar fs = require('fs');\nvar path = require('path');\nvar SourceMapConsumer = require('source-map').SourceMapConsumer;\n\nObject.defineProperty(global, '__stack', {\n    get: function(){\n        var orig = Error.prepareStackTrace;\n        Error.prepareStackTrace = function(_, stack){ return stack; };\n        var err = new Error;\n        Error.captureStackTrace(err, arguments.callee);\n        var stack = err.stack;\n        Error.prepareStackTrace = orig;\n        return stack;\n    }\n});\n\nObject.defineProperty(global, '__line', {\n    get: function(){\n        var result = \"\";\n\n        //if(__stack && __stack.length) {\n        //    if(__stack[0]) {\n        //        result += \"|\" + __stack[0].getLineNumber();\n        //    }\n        //\n        //    if(__stack[1]) {\n        //        result += \"|\" + __stack[1].getLineNumber();\n        //    }\n        //\n        //    if(__stack[2]) {\n        //        result += \"|\" + __stack[2].getLineNumber();\n        //    }\n        //}\n\n        result = __stack[1].getLineNumber();\n\n        return result;\n    }\n});\n\nObject.defineProperty(global, '__file', {\n    get: function(){\n        var result = \"\";\n\n        result = __stack[1].getFileName()\n\n        return result;\n    }\n});\n\nObject.defineProperty(global, '__line0', {get: function() {return (__stack && __stack[0])?__stack[0].getLineNumber():undefined;}});\nObject.defineProperty(global, '__file0', {get: function() {return (__stack && __stack[0])?__stack[0].getFileName():undefined;}});\nObject.defineProperty(global, '__line1', {get: function() {return (__stack && __stack[1])?__stack[1].getLineNumber():undefined;}});\nObject.defineProperty(global, '__file1', {get: function() {return (__stack && __stack[1])?__stack[1].getFileName():undefined;}});\nObject.defineProperty(global, '__line2', {get: function() {return (__stack && __stack[2])?__stack[2].getLineNumber():undefined;}});\nObject.defineProperty(global, '__file2', {get: function() {return (__stack && __stack[2])?__stack[2].getFileName():undefined;}});\nObject.defineProperty(global, '__line3', {get: function() {return (__stack && __stack[3])?__stack[3].getLineNumber():undefined;}});\nObject.defineProperty(global, '__file3', {get: function() {return (__stack && __stack[3])?__stack[3].getFileName():undefined;}});\n\n\n\n//var logger = console;\nvar logger = {};\nlogger.log = function(message1, message2, message3) {\n\n    var filePath = \"\";\n    var lineNumber = NaN;\n\n    function isValidFileName(fileName) {\n        if(\n            !fileName\n            || (fileName && fileName.match(/v8-debug/))\n            || (fileName && fileName.match(/ConsoleAgent/))\n            || (fileName && fileName.match(/megaLogger/))\n        ) {\n            return false;\n        }\n\n        return true;\n    }\n\n    if(isValidFileName(__file0)) {\n        filePath = __file0+'.map';\n        lineNumber = __file0;\n    } else if(isValidFileName(__file1)) {\n        filePath = __file1+'.map';\n        lineNumber = __file1;\n    } else if(isValidFileName(__file2)) {\n        filePath = __file2+'.map';\n        lineNumber = __file2;\n    } else if(isValidFileName(__file3)) {\n        filePath = __file3+'.map';\n        lineNumber = __file3;\n    } else {\n        return false;\n    }\n\n    //console.log(\"###---\", filePath);\n\n    fs.readFile(filePath, function (err, rawSourceMap) {\n        if (err) {\n            console.error(err);\n            return;\n            //throw err;\n            //\n        }\n\n        console.log(\"#####\", rawSourceMap.toString('utf8', 0, rawSourceMap.length));\n        var smc = new SourceMapConsumer(rawSourceMap.toString('utf8', 0, rawSourceMap.length));\n        console.log(smc.originalPositionFor({\n            line: 2,\n            column: 28\n        }));\n        console.log(\"%%%\", smc.sources);\n    });\n\n    // async\n    //path.exists(__file2+'.map', function(exists) {\n    //    if (exists) {\n    //        fs.readFile(filePath, {encoding: 'utf-8'}, function(err, rawSourceMap) {\n    //            if (err) {\n    //                console.error(err);\n    //                return false;\n    //            }\n    //\n    //            //var smc = new SourceMapConsumer(rawSourceMap);\n    //            //console.log(\"%%%\", smc.sources);\n    //        });\n    //    }\n    //});\n\n\n    //console.error(\"^^^\"+__file2+\":\"+__line2+\":\", message1, message2, message3);\n}\n\nmodule.exports = logger;"],"sourceRoot":"/source/"}